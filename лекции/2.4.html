<style>
  P {
    text-indent: 2em; /* Отступ первой строки */
    text-align: justify; /* Выравнивание по ширине */
  }
  h2,
  h3,
  h4,
  h5,
  h6 {
    text-align: center;
  }
  a {
    text-decoration: none;
  }
  h1,
  h2 {
    text-align: center;
  }

  .consoletext {
    background-color: black;
    color: white;
    font-family: Verdana;
    font-size: 14px;
  }
  .console {
    padding: 0px;
    margin: 0px;
  }
  span {
    font-weight: bold;
  }
  code {
    font-weight: bold;
    color: black;
  }
  .syntaxhighlighter .toolbar {
    position: absolute !important;
    right: 1px !important;
    top: 1px !important;
    width: 11px !important;
    height: 11px !important;
    font-size: 10px !important;
    z-index: 10 !important;
    visibility: hidden;
  }
  .toolbar {
    display: none;
  }

  .syntaxhighlighter {
    padding-left: 5px;
    color: rgb(0, 0, 0);
    width: 98% !important;
    margin: 1em 0 1em 0 !important;
    position: relative !important;
    overflow: auto !important;
    font-size: 1em !important;
    max-height: 400px !important;
  }
  .syntaxhighlighter {
    background-color: var(rgb(255, 0, 0)) !important;
  }
  .syntaxhighlighter {
    width: 99% !important;
    margin: 1em 0 1em 0 !important;
    position: relative !important;
    overflow: auto !important;
    font-size: 1em !important;
    height: auto;
    border: silver 1px solid;
    clear: both;
  }
</style>
<!-- Bootstrap CSS -->
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
  crossorigin="anonymous"
/>
<div class="item center menC">
  <h2>Статическая типизация и преобразования типов</h2>

  <p>
    С++ является статически типизированным языком программирования. То есть если
    мы определили для переменной какой-то тип данных, то в последующем мы этот
    тип изменить не сможем. Соответственно переменная может получить значения
    только того типа, который она представляет. Однако нередко возникает
    необходимость присвоить переменной значения каких-то других типов. И в этом
    случае применяются преобразования типов.
  </p>
  <p>
    Ряд преобразований компилятор может производить неявно, то есть
    автоматически. Например:
  </p>
  <div>
    <div id="highlighter_568958" class="syntaxhighlighter cpp">
      <div class="toolbar">
        <span><a href="#" class="toolbar_item command_help help">?</a></span>
      </div>
      <table border="0" cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td class="gutter">
              <div class="line number1 index0 alt2">1</div>
              <div class="line number2 index1 alt1">2</div>
              <div class="line number3 index2 alt2">3</div>
              <div class="line number4 index3 alt1">4</div>
              <div class="line number5 index4 alt2">5</div>
              <div class="line number6 index5 alt1">6</div>
              <div class="line number7 index6 alt2">7</div>
              <div class="line number8 index7 alt1">8</div>
              <div class="line number9 index8 alt2">9</div>
            </td>
            <td class="code">
              <div class="container">
                <div class="line number1 index0 alt2">
                  <code class="cpp preprocessor"
                    >#include &lt;iostream&gt;</code
                  >
                </div>
                <div class="line number2 index1 alt1">&nbsp;</div>
                <div class="line number3 index2 alt2">
                  <code class="cpp color1 bold">int</code>
                  <code class="cpp plain">main()</code>
                </div>
                <div class="line number4 index3 alt1">
                  <code class="cpp plain">{</code>
                </div>
                <div class="line number5 index4 alt2">
                  <code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code
                  ><code class="cpp color1 bold">int</code>
                  <code class="cpp plain">code = </code
                  ><code class="cpp string">'g'</code
                  ><code class="cpp plain">;</code>
                </div>
                <div class="line number6 index5 alt1">
                  <code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code
                  ><code class="cpp color1 bold">char</code>
                  <code class="cpp plain">letter = 103;</code>
                </div>
                <div class="line number7 index6 alt2">
                  <code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code
                  ><code class="cpp plain"
                    >std::cout &lt;&lt; letter &lt;&lt; </code
                  ><code class="cpp string">" in ASCII is "</code>
                  <code class="cpp plain">&lt;&lt; code &lt;&lt; </code
                  ><code class="cpp string">"\n"</code
                  ><code class="cpp plain">;</code>
                </div>
                <div class="line number8 index7 alt1">
                  <code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code
                  ><code class="cpp keyword bold">return</code>
                  <code class="cpp plain">0;</code>
                </div>
                <div class="line number9 index8 alt2">
                  <code class="cpp plain">}</code>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <p>
    В данном случае числовой переменной типа int присваивается символ 'g'. Этот
    символ будет автоматически преобразовываться в число. По факту переменная
    получит числовой код этого символа в таблице ASCII.
  </p>
  <p>
    Переменной letter, наоборот, присваивается число, хотя эта переменная
    представляет тип char. Это число будет преобразовываться в символ, и в итоге
    переменная letter будет хранить символ, чей код в таблице ASCII равен 103,
    то есть символ 'g'.
  </p>
  <p>Результатом этой программы будет следующий консольный вывод:</p>
  <div class="console">
    <pre class="consoletext">
g in ASCII is 103
</pre
    >
  </div>
  <p>Как выполняются преобразования:</p>
  <ul>
    <li>
      <p>
        Переменной типа <span class="b">bool</span> присваивается значение
        другого типа. В этом случае переменная получает
        <span class="b">false</span>, если значение равно 0. Во всех остальных
        случаях переменная получает <span class="b">true</span>.
      </p>
      <div>
        <div id="highlighter_584979" class="syntaxhighlighter cpp">
          <div class="toolbar">
            <span
              ><a href="#" class="toolbar_item command_help help">?</a></span
            >
          </div>
          <table border="0" cellpadding="0" cellspacing="0">
            <tbody>
              <tr>
                <td class="gutter">
                  <div class="line number1 index0 alt2">1</div>
                  <div class="line number2 index1 alt1">2</div>
                  <div class="line number3 index2 alt2">3</div>
                  <div class="line number4 index3 alt1">4</div>
                </td>
                <td class="code">
                  <div class="container">
                    <div class="line number1 index0 alt2">
                      <code class="cpp color1 bold">bool</code>
                      <code class="cpp plain"
                        >a = 1;&nbsp;&nbsp;&nbsp;&nbsp; </code
                      ><code class="cpp comments">// true</code>
                    </div>
                    <div class="line number2 index1 alt1">
                      <code class="cpp color1 bold">bool</code>
                      <code class="cpp plain"
                        >b = 0;&nbsp;&nbsp;&nbsp;&nbsp; </code
                      ><code class="cpp comments">// false</code>
                    </div>
                    <div class="line number3 index2 alt2">
                      <code class="cpp color1 bold">bool</code>
                      <code class="cpp plain">c = </code
                      ><code class="cpp string">'g'</code
                      ><code class="cpp plain">; </code
                      ><code class="cpp comments">// true</code>
                    </div>
                    <div class="line number4 index3 alt1">
                      <code class="cpp color1 bold">bool</code>
                      <code class="cpp plain">d = 3.4;&nbsp;&nbsp; </code
                      ><code class="cpp comments">// true</code>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </li>
    <li>
      <p>
        Числовой или символьной переменной присваивается значение типа
        <span class="b">bool</span>. В этом случае переменная получает 1, если
        значений равно <span class="b">true</span>, либо получает 0, если
        присваиваемое значение равно <span class="b">false</span>.
      </p>
      <div>
        <div id="highlighter_728071" class="syntaxhighlighter cpp">
          <div class="toolbar">
            <span
              ><a href="#" class="toolbar_item command_help help">?</a></span
            >
          </div>
          <table border="0" cellpadding="0" cellspacing="0">
            <tbody>
              <tr>
                <td class="gutter">
                  <div class="line number1 index0 alt2">1</div>
                  <div class="line number2 index1 alt1">2</div>
                </td>
                <td class="code">
                  <div class="container">
                    <div class="line number1 index0 alt2">
                      <code class="cpp color1 bold">int</code>
                      <code class="cpp plain">c = </code
                      ><code class="cpp keyword bold">true</code
                      ><code class="cpp plain"
                        >;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code
                      ><code class="cpp comments">// 1</code>
                    </div>
                    <div class="line number2 index1 alt1">
                      <code class="cpp color1 bold">double</code>
                      <code class="cpp plain">d = </code
                      ><code class="cpp keyword bold">false</code
                      ><code class="cpp plain">;&nbsp;&nbsp; </code
                      ><code class="cpp comments">// 0</code>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </li>
    <li>
      <p>
        Целочисленной переменной присваивается дробное число. В этом случае
        дробная часть после запятой отбрасывается.
      </p>
      <div>
        <div id="highlighter_346361" class="syntaxhighlighter cpp">
          <div class="toolbar">
            <span
              ><a href="#" class="toolbar_item command_help help">?</a></span
            >
          </div>
          <table border="0" cellpadding="0" cellspacing="0">
            <tbody>
              <tr>
                <td class="gutter">
                  <div class="line number1 index0 alt2">1</div>
                  <div class="line number2 index1 alt1">2</div>
                </td>
                <td class="code">
                  <div class="container">
                    <div class="line number1 index0 alt2">
                      <code class="cpp color1 bold">int</code>
                      <code class="cpp plain"
                        >a = 3.4;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code
                      ><code class="cpp comments">// 3</code>
                    </div>
                    <div class="line number2 index1 alt1">
                      <code class="cpp color1 bold">int</code>
                      <code class="cpp plain"
                        >b = 3.6;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code
                      ><code class="cpp comments">// 3</code>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </li>
    <li>
      <p>
        Переменной, которая представляет тип с плавающей точкой, присваивается
        целое число. В этом случае если целое число содержит больше битов, чем
        может вместить тип переменной, то часть информации усекается.
      </p>
      <div>
        <div id="highlighter_533243" class="syntaxhighlighter cpp">
          <div class="toolbar">
            <span
              ><a href="#" class="toolbar_item command_help help">?</a></span
            >
          </div>
          <table border="0" cellpadding="0" cellspacing="0">
            <tbody>
              <tr>
                <td class="gutter">
                  <div class="line number1 index0 alt2">1</div>
                  <div class="line number2 index1 alt1">2</div>
                </td>
                <td class="code">
                  <div class="container">
                    <div class="line number1 index0 alt2">
                      <code class="cpp color1 bold">float</code>
                      <code class="cpp plain"
                        >a =
                        35005;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code
                      ><code class="cpp comments">// 35005</code>
                    </div>
                    <div class="line number2 index1 alt1">
                      <code class="cpp color1 bold">double</code>
                      <code class="cpp plain"
                        >b = 3500500000033;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code
                      ><code class="cpp comments">// 3.5005e+012</code>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </li>
    <li>
      <p>
        Переменной беззнакового типа (unsigned) присваивается значение не из его
        диапазона. В этом случае результатом будет остаток от деления по модулю.
        Например, тип <span class="b">unsigned char</span> может хранить
        значения от 0 до 255. Если присвоить ему значение вне этого диапазона,
        то компилятор присвоит ему остаток от деления по модулю 256 (так как тип
        unsigned char может хранить 256 значений). Так, при присвоении значения
        -1 переменная типа unsigned char получит 256 - |-1/256| = 255
      </p>
      <div>
        <div id="highlighter_394961" class="syntaxhighlighter cpp">
          <div class="toolbar">
            <span
              ><a href="#" class="toolbar_item command_help help">?</a></span
            >
          </div>
          <table border="0" cellpadding="0" cellspacing="0">
            <tbody>
              <tr>
                <td class="gutter">
                  <div class="line number1 index0 alt2">1</div>
                  <div class="line number2 index1 alt1">2</div>
                  <div class="line number3 index2 alt2">3</div>
                </td>
                <td class="code">
                  <div class="container">
                    <div class="line number1 index0 alt2">
                      <code class="cpp plain">unsigned </code
                      ><code class="cpp color1 bold">char</code>
                      <code class="cpp plain"
                        >a =
                        -5;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code
                      ><code class="cpp comments">// 251</code>
                    </div>
                    <div class="line number2 index1 alt1">
                      <code class="cpp plain">unsigned </code
                      ><code class="cpp color1 bold">short</code>
                      <code class="cpp plain"
                        >b = -3500;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code
                      ><code class="cpp comments">// 62036 ()</code>
                    </div>
                    <div class="line number3 index2 alt2">
                      <code class="cpp plain">unsigned </code
                      ><code class="cpp color1 bold">int</code>
                      <code class="cpp plain"
                        >c = -50000000;&nbsp;&nbsp;&nbsp;&nbsp; </code
                      ><code class="cpp comments">// 4244967296</code>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </li>
    <li>
      <p>
        Переменной знакового типа (signed) присваивается значение не из его
        диапазона. В этом случае результат не определен. Программа может
        работать нормально, выдавая адекватный результат, а может работать
        некорректно.
      </p>
    </li>
  </ul>
  <h3>Опасные и безопасные преобразования</h3>
  <p>
    Те преобразования, при которых не происходит потеря информации, являются
    безопасными. Как правило, это преобразования от типа с меньшей разрядностью
    к типу с большей разрядностью. В частности, это следующие цепочки
    преобразований:
  </p>
  <p>
    <span class="b"
      >bool -&gt; char -&gt; short -&gt; int -&gt; double -&gt; long
      double</span
    >
  </p>
  <p>
    <span class="b"
      >bool -&gt; char -&gt; short -&gt; int -&gt; long -&gt; long long</span
    >
  </p>
  <p>
    <span class="b"
      >unsigned char -&gt; unsigned short -&gt; unsigned int -&gt; unsigned
      long</span
    >
  </p>
  <p><span class="b">float -&gt; double -&gt; long double</span></p>
  <p>Примеры безопасных преобразований:</p>
  <div>
    <div id="highlighter_114671" class="syntaxhighlighter cpp">
      <div class="toolbar">
        <span><a href="#" class="toolbar_item command_help help">?</a></span>
      </div>
      <table border="0" cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td class="gutter">
              <div class="line number1 index0 alt2">1</div>
              <div class="line number2 index1 alt1">2</div>
              <div class="line number3 index2 alt2">3</div>
              <div class="line number4 index3 alt1">4</div>
              <div class="line number5 index4 alt2">5</div>
              <div class="line number6 index5 alt1">6</div>
            </td>
            <td class="code">
              <div class="container">
                <div class="line number1 index0 alt2">
                  <code class="cpp color1 bold">short</code>
                  <code class="cpp plain">a = </code
                  ><code class="cpp string">'g'</code
                  ><code class="cpp plain">; </code
                  ><code class="cpp comments"
                    >// преобразование из char в short</code
                  >
                </div>
                <div class="line number2 index1 alt1">
                  <code class="cpp color1 bold">int</code>
                  <code class="cpp plain">b = 10;</code>
                </div>
                <div class="line number3 index2 alt2">
                  <code class="cpp color1 bold">double</code>
                  <code class="cpp plain">c = b; </code
                  ><code class="cpp comments"
                    >// преобразование из int в double</code
                  >
                </div>
                <div class="line number4 index3 alt1">
                  <code class="cpp color1 bold">float</code>
                  <code class="cpp plain">d = 3.4;</code>
                </div>
                <div class="line number5 index4 alt2">
                  <code class="cpp color1 bold">double</code>
                  <code class="cpp plain">e = d; </code
                  ><code class="cpp comments"
                    >// преобразование из float в double</code
                  >
                </div>
                <div class="line number6 index5 alt1">
                  <code class="cpp color1 bold">double</code>
                  <code class="cpp plain">f = 35; </code
                  ><code class="cpp comments"
                    >// преобразование из int в double</code
                  >
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <p>
    Но также есть опасные преобразования. При подобных преобразованиях мы
    потенциально можем потерять точность данных. Как правило, это преобразования
    от типа с большей разрядностью к типу с меньшей разрядностью.
  </p>
  <div>
    <div id="highlighter_755487" class="syntaxhighlighter cpp">
      <div class="toolbar">
        <span><a href="#" class="toolbar_item command_help help">?</a></span>
      </div>
      <table border="0" cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td class="gutter">
              <div class="line number1 index0 alt2">1</div>
              <div class="line number2 index1 alt1">2</div>
            </td>
            <td class="code">
              <div class="container">
                <div class="line number1 index0 alt2">
                  <code class="cpp color1 bold">char</code>
                  <code class="cpp plain">letter = 295;</code>
                </div>
                <div class="line number2 index1 alt1">
                  <code class="cpp plain">std::cout &lt;&lt; letter;</code>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <p>
    В данном случае переменной letter присваивается значение, которое выходит за
    пределы диапазона допустимых значений для типа char, то есть больше 255.
  </p>
  <p>
    И в подобных примерах многое зависит от компилятора. В ряде случаев
    компиляторы при компиляции выдают предупреждение, тем не менее программа
    может быть успешно скомпилирована. В других случаях компиляторы не выдают
    никакого предупреждения. Собственно в этом и заключается опасность, что
    программа успешно компилируется, но тем не менее существует риск потери
    точности данных.
  </p>
  <p>
    И, как правило, в подобных случаях при компиляции присваиваемое значение
    усекается до допустимого. Например, в примере выше число 295 будет сокращено
    до 39. То есть следующие переменные будут содержать одно и то же значение:
  </p>
  <div>
    <div id="highlighter_133769" class="syntaxhighlighter cpp">
      <div class="toolbar">
        <span><a href="#" class="toolbar_item command_help help">?</a></span>
      </div>
      <table border="0" cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td class="gutter">
              <div class="line number1 index0 alt2">1</div>
              <div class="line number2 index1 alt1">2</div>
            </td>
            <td class="code">
              <div class="container">
                <div class="line number1 index0 alt2">
                  <code class="cpp color1 bold">char</code>
                  <code class="cpp plain">letter1 = 295;</code>
                </div>
                <div class="line number2 index1 alt1">
                  <code class="cpp color1 bold">char</code>
                  <code class="cpp plain">letter2 = 39;</code>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
